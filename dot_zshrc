# load zgenom
source "${HOME}/.zgenom/zgenom.zsh"


# Config for zsh-autocomplete
zstyle ':autocomplete:recent-dirs' backend zoxide

# Check for plugin and zgenom updates every 7 days
# This does not increase the startup time.
zgenom autoupdate

# if the init script doesn't exist
if ! zgenom saved; then
    echo "Creating a zgenom save"

    # Add this if you experience issues with missing completions or errors mentioning compdef.
    zgenom compdef

    # Ohmyzsh base library
    zgenom ohmyzsh
    zgenom ohmyzsh plugins/sudo
    zgenom ohmyzsh plugins/git
    zgenom ohmyzsh plugins/asdf
    zgenom ohmyzsh plugins/tmux
    [[ "$(uname -s)" = Darwin ]] && zgenom ohmyzsh plugins/macos
    [[ "$(uname -s)" = Darwin ]] && zgenom ohmyzsh plugins/gnu-utils

    zgenom ohmyzsh --completion plugins/docker-compose

    # bulk load
    zgenom loadall <<EOPLUGINS
    zsh-users/zsh-syntax-highlighting
    redxtech/zsh-asdf-direnv
EOPLUGINS

    zgenom load catppuccin/zsh-syntax-highlighting themes/catppuccin_mocha-zsh-syntax-highlighting.zsh
    # save all to init script
    zgenom save

    # Compile your zsh files
    zgenom compile "$HOME/.zshrc"
    zgenom compile $ZDOTDIR
fi

export LANG=en_US.UTF-8
export EDITOR='nvim'
export GOPATH='/Users/jlopez/go'
export PATH="/Users/jlopez/.local/bin:$PATH"
export BAT_THEME="Catppuccin-mocha"

alias vzsh="nvim ~/.zshrc"
alias vtmux="nvim ~/.tmux.conf"
alias vim="nvim"

# The next line updates PATH for the Google Cloud SDK.
if [ -f '/Users/jlopez/.google-cloud-sdk/path.zsh.inc' ]; then . '/Users/jlopez/.google-cloud-sdk/path.zsh.inc'; fi

# The next line enables shell command completion for gcloud.
if [ -f '/Users/jlopez/.google-cloud-sdk/completion.zsh.inc' ]; then . '/Users/jlopez/.google-cloud-sdk/completion.zsh.inc'; fi

# Replace unix cli by rust alternatives
if type "exa" > /dev/null; then
    alias ls="exa --icons -1"
    compdef ls=exa
    alias ll"exa --icons --long"
    compdef ll=exa
    alias tree="exa -T --icons --git-ignore"
    compdef tree=exa
fi

if type "bat" > /dev/null; then
    alias cat="bat"
    compdef cat=bat
fi

if type "fd" > /dev/null; then
    alias find="fd"
    compdef find=fd
fi

if type "rg" > /dev/null; then
    alias grep="rg"
    compdef grep=rg
fi

if type "sd" > /dev/null; then
    alias sed="sd"
    # compdef sed=sd sd doesn't have a completion
fi

if type "procs" > /dev/null; then
    alias ps="procs"
    compdef ps=procs
fi

if type "duf" > /dev/null; then
    alias df="duf"
    compdef df=duf
fi

if type "zoxide" > /dev/null; then
    eval "$(zoxide init zsh --cmd cd)"
fi

if type "starship" > /dev/null; then
    eval "$(starship init zsh)"
fi
